{header}
<!-- Breadcrumb -->
<nav class="flex items-center gap-2 text-sm text-gray-600 mb-6">
  <a href="{url_home}" class="hover:text-brand-blue transition"><i class="fa-solid fa-home"></i></a>
  <i class="fa-solid fa-chevron-right text-xs"></i>
  <span class="text-gray-900">{clickstream}</span>
  <div class="ml-auto flex items-center gap-4">
    <a href="{url_top_images}" class="hover:text-brand-blue transition font-medium"><i class="fa-solid fa-star text-xs"></i> {lang_top_images}</a>
    <a href="{url_new_images}" class="hover:text-brand-blue transition font-medium"><i class="fa-solid fa-sparkles text-xs"></i> {lang_new_images}</a>
  </div>
</nav>

<!-- Main Layout: Sidebar + Content -->
<div class="grid grid-cols-1 lg:grid-cols-12 gap-6">

  <!-- Sidebar (3 cols desktop, full-width mobile) -->
  <aside class="lg:col-span-3 space-y-6">

    <!-- User Box Card -->
    <div class="bg-white rounded-lg shadow overflow-hidden">
      <div class="bg-brand-blue text-white px-4 py-3 font-semibold text-sm flex items-center gap-2">
        <i class="fa-solid fa-user"></i>
        {lang_registered_user}
      </div>
      <div class="p-4 text-sm text-center">
        {user_box}
      </div>
    </div>

    <!-- Random Category Image Card -->
    {if random_cat_image}
    <div class="bg-white rounded-lg shadow overflow-hidden">
      <div class="bg-brand-blue text-white px-4 py-3 font-semibold text-sm flex items-center gap-2">
        <i class="fa-solid fa-shuffle"></i>
        {lang_random_image}
      </div>
      <div class="p-4 text-center">
        {random_cat_image}
      </div>
    </div>
    {endif random_cat_image}

  </aside>

  <!-- Main Content (9 cols desktop) -->
  <section class="lg:col-span-9">

    <!-- Image Title -->
    <div class="mb-4">
      <h1 class="text-3xl font-bold text-gray-900 inline-block">
        {image_name}
      </h1>
      {if image_is_new}
      <sup class="ml-2 px-2 py-1 bg-brand-yellow text-gray-900 text-xs font-bold rounded uppercase">{lang_new}</sup>
      {endif image_is_new}
    </div>

    <hr class="border-t border-gray-300 mb-6" />

    <!-- Success/Error Message -->
    {if msg}
    <div class="bg-blue-50 border border-blue-200 text-blue-900 px-4 py-3 rounded mb-6">
      <b>{msg}</b>
    </div>
    {endif msg}

    <!-- Image Display (centered) -->
    <div class="text-center mb-6">
      {image}

      {if admin_links}
      <div class="mt-4">
        {admin_links}
      </div>
      {endif admin_links}

      <!-- Action Buttons -->
      <div class="mt-4 flex flex-wrap items-center justify-center gap-3">
        {lightbox_button}
        {postcard_button}
        <span class="hidden sm:inline text-gray-300">|</span>
        {download_button}
        {download_zip_button}
      </div>
    </div>

    <!-- Image Information Table -->
    <div class="bg-white rounded-lg shadow overflow-hidden mb-6">
      <div class="bg-brand-blue text-white px-6 py-4 font-semibold">
        {image_name}
      </div>
      <div class="divide-y divide-gray-200">
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 px-6 py-4 bg-white">
          <div class="font-semibold text-gray-700">{lang_description}</div>
          <div class="sm:col-span-2 text-gray-900">{image_description}</div>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 px-6 py-4 bg-gray-50">
          <div class="font-semibold text-gray-700">{lang_keywords}</div>
          <div class="sm:col-span-2 text-gray-900">{image_keywords}</div>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 px-6 py-4 bg-white">
          <div class="font-semibold text-gray-700">{lang_date}</div>
          <div class="sm:col-span-2 text-gray-900">{image_date}</div>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 px-6 py-4 bg-gray-50">
          <div class="font-semibold text-gray-700">{lang_hits}</div>
          <div class="sm:col-span-2 text-gray-900">{image_hits}</div>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 px-6 py-4 bg-white">
          <div class="font-semibold text-gray-700">{lang_downloads}</div>
          <div class="sm:col-span-2 text-gray-900">{image_downloads}</div>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 px-6 py-4 bg-gray-50">
          <div class="font-semibold text-gray-700">{lang_rating}</div>
          <div class="sm:col-span-2 text-gray-900">{image_rating} ({image_votes} {lang_votes})</div>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 px-6 py-4 bg-white">
          <div class="font-semibold text-gray-700">{lang_file_size}</div>
          <div class="sm:col-span-2 text-gray-900">{image_file_size}</div>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 px-6 py-4 bg-gray-50">
          <div class="font-semibold text-gray-700">{lang_added_by}</div>
          <div class="sm:col-span-2 text-gray-900">{user_name_link}</div>
        </div>
      </div>
    </div>

    <!-- IPTC Info -->
    {if iptc_info}
    <div class="bg-white rounded-lg shadow overflow-hidden mb-6">
      <div class="bg-brand-blue text-white px-6 py-4 font-semibold">
        IPTC Info
      </div>
      <div class="divide-y divide-gray-200">
        {iptc_info}
      </div>
    </div>
    {endif iptc_info}

    <!-- EXIF Info -->
    {if exif_info}
    <div class="bg-white rounded-lg shadow overflow-hidden mb-6">
      <div class="bg-brand-blue text-white px-6 py-4 font-semibold">
        EXIF Info
      </div>
      <div class="divide-y divide-gray-200">
        {exif_info}
      </div>
    </div>
    {endif exif_info}

    <!-- Rating Form -->
    {if rate_form}
    <div class="text-center mb-6">
      {rate_form}
    </div>
    {endif rate_form}

    <!-- Comments Section -->
    {if allow_comments}
    <a name="comments" class="block" id="comments"></a>

    <div class="bg-white rounded-lg shadow overflow-hidden mb-6">
      <div class="bg-brand-blue text-white px-6 py-4 font-semibold flex items-center gap-2">
        <i class="fa-solid fa-comments"></i>
        {lang_comments}
      </div>
      <div class="divide-y divide-gray-200">
        <div class="grid grid-cols-1 sm:grid-cols-4 gap-4 px-6 py-3 bg-gray-100 font-semibold text-sm">
          <div class="sm:col-span-1">{lang_author}</div>
          <div class="sm:col-span-3">{lang_comment}</div>
        </div>
        {comments}
      </div>
    </div>

    <!-- Comment Form -->
    <div class="mb-6">
      {comment_form}
    </div>
    {endif allow_comments}

    <!-- Previous / Next Navigation -->
    <div class="bg-white rounded-lg shadow overflow-hidden">
      <div class="grid grid-cols-1 sm:grid-cols-2 divide-y sm:divide-y-0 sm:divide-x divide-gray-200">
        <!-- Previous Image -->
        <div class="px-6 py-4 bg-gray-50">
          {if prev_image_name}
          <div class="text-sm text-gray-600 mb-2 flex items-center gap-2">
            <i class="fa-solid fa-chevron-left text-xs"></i>
            {lang_prev_image}
          </div>
          <a href="{prev_image_url}" class="font-semibold text-brand-blue hover:text-brand-blue-dark transition">
            {prev_image_name}
          </a>
          <!-- Uncomment to show thumbnail:
          <div class="mt-3">
            <a href="{prev_image_url}">
              <img src="{prev_thumb_file}" alt="{prev_image_name}" class="rounded border border-gray-300 hover:border-brand-blue transition" />
            </a>
          </div>
          -->
          {endif prev_image_name}
        </div>

        <!-- Next Image -->
        <div class="px-6 py-4 bg-gray-50 text-right">
          {if next_image_name}
          <div class="text-sm text-gray-600 mb-2 flex items-center justify-end gap-2">
            {lang_next_image}
            <i class="fa-solid fa-chevron-right text-xs"></i>
          </div>
          <a href="{next_image_url}" class="font-semibold text-brand-blue hover:text-brand-blue-dark transition">
            {next_image_name}
          </a>
          <!-- Uncomment to show thumbnail:
          <div class="mt-3">
            <a href="{next_image_url}">
              <img src="{next_thumb_file}" alt="{next_image_name}" class="rounded border border-gray-300 hover:border-brand-blue transition" />
            </a>
          </div>
          -->
          {endif next_image_name}
        </div>
      </div>
    </div>

  </section>

</div>
{footer}
